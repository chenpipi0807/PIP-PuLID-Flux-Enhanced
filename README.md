# ComfyUI-PuLID-Flux-Enhanced

改编自 https://github.com/chenpipi0807/PIP-PuLID-Flux-Enhanced.git

部分思路借鉴：https://github.com/balazik/ComfyUI-PuLID-Flux

![微信截图_20250402175311](https://github.com/user-attachments/assets/53586740-0563-48c5-b463-58688b3e5f30)
![微信截图_20250402174710](https://github.com/user-attachments/assets/f37d718c-a99c-42a4-a5e2-3743283c5970)


## 核心功能

### 高级身份保持和姿势解耦方法

本项目提供三种不同的方法来实现身份保持和姿势控制：

1. **保真度（Fidelity）**：经典方法，专注于身份保持，基于正交投影v2。

2. **自适应通道选择（Adaptive）** - 基于特征相关性分析动态识别哪些特征通道与姿势或身份相关。这种方法比固定通道策略提供更精确的姿势解耦，能够自动适应不同的模型和图像。

3. **残差连接方法（Residual）** - 实现了InfiniteYou方法的简化版本，直接添加身份特征而不是使用正交投影。这种方法通常产生更高保真度的结果，同时仍然保持良好的姿势变化。

### 方法特点与选择指南

- **自适应方法**在需要保持提示和参考图像之间明显姿势差异时效果最佳。它特别适合于较强的引导比例。

- **残差方法**通常提供最高的身份保真度，同时仍然允许姿势变化。尝试在权重为0.9-1.1时使用此方法。

## 解决的问题

本项目主要解决了AI图像生成中的以下问题：

1. **身份保持与姿势灵活性的平衡** - 传统方法在保持身份特征的同时往往会限制姿势变化，我们的方法提供了更好的平衡。

2. **特征空间更精确的分离** - 通过自适应通道选择和残差连接，更准确地区分身份和姿势特征，提高生成质量。

3. **更广泛的适用性** - 提供更好的文本遵从一定程度上降低畸形概率。

## 使用方法

### 安装

1. 将本仓库克隆到ComfyUI的`custom_nodes`目录下
2. 重启 ComfyUI

### 使用

1. 在ComfyUI中，搜索并添加 **Apply PIP-PuLID-Flux** 节点
2. 连接你的条件（提示）和参考图像到节点
3. 在节点设置中选择不同的方法：
   - **Fidelity**：当你需要最大程度保持参考图像的身份特征时选择
   - **Adaptive**：当你需要在身份保持和姿势灵活性之间取得平衡时选择
   - **Residual**：当你想要高保真度的身份特征，同时保持对姿势的控制时选择

4. 调整权重参数（推荐0.8-1.1之间）来达到理想的效果
